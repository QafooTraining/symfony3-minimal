<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <!--
    <parameters>
        <parameter key="myparam">Value</parameter>
    </parameters>
    -->

    <services>
        <service id="CustomerCenter.Domain.AddressService"
                 class="DefShop\CustomerCenterBundle\Domain\AddressService">
            <argument type="service" id="CustomerCenter.DataManager.AddressDataManager" />
        </service>

        <service id="CustomerCenter.Domain.PersonService"
                 class="DefShop\CustomerCenterBundle\Domain\PersonService">
            <argument type="service" id="CustomerCenter.DataManager.PersonDataManager" />
        </service>

        <service id="CustomerCenter.DataManager.PersonDataManager"
                 class="DefShop\CustomerCenterBundle\DataManager\PersonDataManager">
            <argument type="service">
                <service class="Doctrine\ORM\EntityRepository">
                    <factory service="doctrine.orm.default_entity_manager"
                             method="getRepository" />
                    <argument>DefShop\CustomerCenterBundle\Entity\Person</argument>
                </service>
            </argument>
            <argument type="service" id="doctrine.orm.entity_manager" />
        </service>

        <service id="CustomerCenter.DataManager.AddressDataManager"
                 class="DefShop\CustomerCenterBundle\DataManager\AddressDataManager">
            <argument type="service">
                <service class="Doctrine\ORM\EntityRepository">
                    <factory service="doctrine.orm.default_entity_manager"
                             method="getRepository" />
                    <argument>DefShop\CustomerCenterBundle\Entity\Address</argument>
                </service>
            </argument>
            <argument type="service" id="doctrine.orm.entity_manager" />
        </service>

        <service id="CustomerCenter.Controller.PersonParamConverter"
                 class="DefShop\CustomerCenterBundle\Controller\ParameterConverter\PersonParamConverter">
            <argument type="service" id="CustomerCenter.DataManager.PersonDataManager" />

            <tag name="request.param_converter" priority="1000" />
        </service>

        <service id="CustomerCenter.Controller.AddressParamConverter"
                 class="DefShop\CustomerCenterBundle\Controller\ParameterConverter\AddressParamConverter">
            <argument type="service" id="CustomerCenter.DataManager.AddressDataManager" />

            <tag name="request.param_converter" priority="1000" />
        </service>
    </services>
</container>
